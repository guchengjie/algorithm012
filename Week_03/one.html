<script>
  /**
   * Definition for a binary tree node.
   * function TreeNode(val) {
   *     this.val = val;
   *     this.left = this.right = null;
   * }
   */
  /**
   * @param {TreeNode} root
   * @param {TreeNode} p
   * @param {TreeNode} q
   * @return {TreeNode}
   */
  var lowestCommonAncestor = function(root, p, q) {
      // let deep = 0;
      // let parent = [];
      // let a = (node, l) => {
      //     if (node === null) return;
      //     if (node.val === p.val || node.val === q.val) {
      //         deep = Math.max(deep, l);
      //     }
      //     node.left && node.right && parent.push(node.val);
      //     node.left && a(node.left, l + 1);
      //     node.right && a(node.right, l + 1);
      // }

      // a(root, 1);
      // console.log(parent, deep)
      // return parent[deep];
      if(root == null || root == p || root == q){
          return root;
      }
      let left = lowestCommonAncestor(root.left,p,q);
      let right = lowestCommonAncestor(root.right,p,q);
      if (left && right) {
          return root;
      } else if (left) {
          return left;
      } else if (right) {
          return right;
      }
      return null;
  };
</script>